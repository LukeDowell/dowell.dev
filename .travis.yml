language: java
jdk: openjdk11
env:
  - RELEASE_TAG="release-$TRAVIS_BUILD_NUMBER"
services:
  - docker
script:
  - ./gradlew clean build
after_script:
  - ls -a
  - echo "Pushing dowell.dev version $RELEASE_TAG to docker hub..."
  - echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin
  - docker build -t dowell.dev:$RELEASE_TAG .
  - docker push lukedowell/dowell.dev